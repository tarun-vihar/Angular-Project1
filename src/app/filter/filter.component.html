<app-header></app-header>
<section>
  <h2>Filter the results</h2>
  <div>
    <mat-radio-group
      aria-labelledby="example-radio-group-label"
      class="example-radio-group"
    >
      <mat-radio-button
        class="example-radio-button"
        *ngFor="let question of Questions; let i = index"
        [value]="question"
        (click)="renderHTML(i)"
      >
        {{ question }}
      </mat-radio-button>
    </mat-radio-group>

    <div *ngIf="q1">
      <mat-form-field appearance="fill">
        <mat-label>User</mat-label>
        <mat-select [(value)]="selectedUser">
          <mat-option
            [value]="user.username"
            *ngFor="let user of usersList | async"
            >{{ user.firstName }}</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="q2">
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          (dateInput)="addEvent('input', $event)"
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker [dateClass]="dateClass" #picker></mat-datepicker>
      </mat-form-field>
    </div>

    <div *ngIf="q3">
      <mat-form-field appearance="fill">
        <mat-label>User1 </mat-label>
        <mat-select [(value)]="selectedUser1">
          <mat-option
            [value]="user.username"
            *ngFor="let user of usersList | async"
            >{{ user.firstName }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      &nbsp; &nbsp;
      <mat-form-field appearance="fill">
        <mat-label>User 2</mat-label>
        <mat-select [(value)]="selectedUser2">
          <mat-option
            [value]="user.username"
            *ngFor="let user of usersList | async"
            >{{ user.firstName }}</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <button (click)="getResults(index)" class="btn btn-danger">Search</button>
  </div>

  <br />

  <div *ngIf="showUserTable">
    <table
      mat-table
      [dataSource]="filterUserList"
      class="mat-elevation-z8 demo-table"
      *ngIf="filterUserList.length"
    >
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>UserName</th>
        <td mat-cell *matCellDef="let element">{{ element.username }}</td>
      </ng-container>

      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let element">{{ element.email }}</td>
      </ng-container>

      <ng-container matColumnDef="following">
        <th mat-header-cell *matHeaderCellDef>Following Count</th>
        <td mat-cell *matCellDef="let element">{{ element.followingCount }}</td>
      </ng-container>

      <ng-container matColumnDef="follower">
        <th mat-header-cell *matHeaderCellDef>Follower Count</th>
        <td mat-cell *matCellDef="let element">{{ element.follwerCount }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        (click)="clickedRows.add(row)"
        [class.demo-row-is-clicked]="clickedRows.has(row)"
        *matRowDef="let row; columns: displayedColumns"
      ></tr>
    </table>
    <div *ngIf="filterUserList.length === 0">
      No Users found with applied criteria
    </div>
  </div>

  <div *ngIf="showBlogTable">
    <table
      mat-table
      [dataSource]="blogFilterList"
      class="mat-elevation-z8 demo-table"
      *ngIf="blogFilterList.length"
    >
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>Blog ID</th>
        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
      </ng-container>

      <ng-container matColumnDef="blogName">
        <th mat-header-cell *matHeaderCellDef>Blog Name</th>
        <td mat-cell *matCellDef="let element">{{ element.blogName }}</td>
      </ng-container>

      <ng-container matColumnDef="tagsList">
        <th mat-header-cell *matHeaderCellDef>Tags</th>
        <td mat-cell *matCellDef="let element">{{ element.tagsList }}</td>
      </ng-container>

      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef>Author Count</th>
        <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
      </ng-container>

      <ng-container matColumnDef="commentCount">
        <th mat-header-cell *matHeaderCellDef>Number of Positive Count</th>
        <td mat-cell *matCellDef="let element">
          {{ element.commentList.length }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="blogDisplayedColumns"></tr>
      <tr
        mat-row
        (click)="clickedRows.add(row)"
        [class.demo-row-is-clicked]="clickedRows.has(row)"
        *matRowDef="let row; columns: blogDisplayedColumns"
      ></tr>
    </table>

    <div *ngIf="blogFilterList.length === 0">
      No Blogs found with applied criteria
    </div>
  </div>
</section>
